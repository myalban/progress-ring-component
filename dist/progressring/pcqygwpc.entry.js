const t=window.ProgressRing.h;function e(t){var e=t*t;return t<4/11?7.5625*e:t<8/11?9.075*e-9.9*t+3.4:t<.9?4356/361*e-35442/1805*t+16061/1805:10.8*t*t-20.52*t+10.72}var i=Object.freeze({backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},bounceInOut:function(t){return t<.5?.5*(1-e(1-2*t)):.5*e(2*t-1)+.5},bounceIn:function(t){return 1-e(1-t)},bounceOut:e,circInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},circIn:function(t){return 1-Math.sqrt(1-t*t)},circOut:function(t){return Math.sqrt(1- --t*t)},cubicInOut:function(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1},cubicIn:function(t){return t*t*t},cubicOut:function(t){var e=t-1;return e*e*e+1},elasticInOut:function(t){return t<.5?.5*Math.sin(13*Math.PI/2*2*t)*Math.pow(2,10*(2*t-1)):.5*Math.sin(-13*Math.PI/2*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+1},elasticIn:function(t){return Math.sin(13*t*Math.PI/2)*Math.pow(2,10*(t-1))},elasticOut:function(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-10*t)+1},expoInOut:function(t){return 0===t||1===t?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-20*t)+1},expoIn:function(t){return 0===t?t:Math.pow(2,10*(t-1))},expoOut:function(t){return 1===t?t:1-Math.pow(2,-10*t)},linear:function(t){return t},quadInOut:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},quadIn:function(t){return t*t},quadOut:function(t){return-t*(t-2)},quartInOut:function(t){return t<.5?8*Math.pow(t,4):-8*Math.pow(t-1,4)+1},quartIn:function(t){return Math.pow(t,4)},quartOut:function(t){return Math.pow(t-1,3)*(1-t)+1},quintInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},quintIn:function(t){return t*t*t*t*t},quintOut:function(t){return--t*t*t*t*t+1},sineInOut:function(t){return-.5*(Math.cos(Math.PI*t)-1)},sineIn:function(t){var e=Math.cos(t*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e},sineOut:function(t){return Math.sin(t*Math.PI/2)}});const s=window.requestAnimationFrame||(t=>setTimeout(t,1e3/60)),r=window.cancelAnimationFrame||(t=>clearTimeout(t)),n={duration:4e3,easingType:"cubicInOut"};class a{constructor(){this.radius=80,this.strokeWidth=10,this.setShapeSettings=(({radius:t=this.radius,strokeWidth:e=this.strokeWidth})=>{this.normalizedRadius=t-Math.floor(e/2),this.circumference=2*this.normalizedRadius*Math.PI}),this.intSize=30,this.decimalSize=Math.floor(.7*this.intSize),this.disableDigits=!1,this.setTextSettings=(({intSize:t=this.intSize,decimalSize:e=this.decimalSize})=>{this.textOffset=(t-e)/4}),this.parsePercentText=(t=>t<=0?["0","00"]:t.toFixed(1).split(".")),this.colors=["#ff4f40","#ffcd40","#30bf7a","#66a0ff"],this.setColorsSettings=(({invertColors:t=this.invertColors})=>{const e=Object.assign({},this.colors);this.colors=t?e.reverse():e}),this.setColors=(t=>{let e;this.ring.style.stroke=e=t<=25?this.colors[0]:t<=50?this.colors[1]:t<=75?this.colors[2]:this.colors[3],this.ringBackground.style.stroke=e,this.percentText.style.fill=e}),this.percent=0,this.duration=4e3,this.easingType="quartInOut",this.start=0,this.progress=0,this.isLoaded=!1,this.setProgress=(({progress:t,stopFrames:e,restartFrames:i})=>{if(!this.isLoaded&&e)return void e();this.progress=t,this.restartFrames=i;const s=(this.internalPercent-this.start)*t+this.start;this.ring.style.strokeDashoffset=String(s>=100?0:this.circumference-s/100*this.circumference);const r=this.parsePercentText(s);this.intText.innerHTML=r[0],this.decimalText.innerHTML=r[1]})}radiusUpdated(t){this.setShapeSettings({radius:t})}strokeWidthUpdated(t){this.setShapeSettings({strokeWidth:t})}intSizeUpdated(t){this.setTextSettings({intSize:t})}decimalSizeUpdated(t){this.setTextSettings({decimalSize:t})}invertColorsUpdated(t){this.setColorsSettings({invertColors:t})}percentUpdated(){this.percent<0?this.percent=0:this.restartProgress()}durationtUpdated(){this.restartProgress()}easingTypeUpdated(){this.restartProgress()}restartProgress(){if(!this.restartFrames)return;const t=(this.internalPercent-this.start)*this.progress+this.start;this.internalPercent=this.percent,this.progress=0,this.start=t,this.restartFrames({restartDuration:this.duration,restartEasingType:this.easingType,restartTemplate:this.setProgress})}componentWillLoad(){this.percent<0?this.percent=0:(this.isLoaded=!0,this.internalPercent=this.percent,this.setShapeSettings({radius:this.radius,strokeWidth:this.strokeWidth}),this.setTextSettings({intSize:this.intSize,decimalSize:this.decimalSize}),this.setColorsSettings({invertColors:this.invertColors}),function({easingType:t=n.easingType,duration:e=n.duration,template:a,complete:o=null}={}){if(!a)return;let h=i[t],c=e,u=a,d=o,l=null,p=null,f=0,g=0,m=null,S=null,M=null,T=!1,y=!1,b=!1,z=!1;const w=t=>{const e=t||(new Date).getTime();if(b?(p=e-f,b=!1):f=e-(p=p||e),f<c&&!y){l=s(w),g=h(f/c);try{u({progress:g,stopFrames:m,resumeFrames:S,restartFrames:M})}catch(t){r(l)}}else{if(z)return y=!1,z=!1,void s(w);f>=c&&(u({progress:1,stopFrames:null,resumeFrames:null,restartFrames:M}),T=!0,l=null,d&&d())}};m=(()=>{y=!0}),S=(()=>{y&&(y=!1,b=!0,l=s(w))}),M=(({restartEasingType:t=n.easingType,restartDuration:e=n.duration,restartTemplate:r,restartComplete:a=null}={})=>{r&&(h=i[t],c=e,u=r,d=a,p=null,f=0,g=0,T||y||(m(),z=!0),y&&(y=!1,l=s(w)),T&&(T=!1,l=s(w)))}),l=s(w)}({duration:this.duration,easingType:this.easingType,template:this.setProgress}))}componentDidLoad(){this.setColors(this.percent)}componentDidUpdate(){this.setColors(this.percent)}componentDidUnload(){this.isLoaded=!1}render(){return t("svg",{height:2*this.radius,width:2*this.radius},t("circle",{cx:this.radius,cy:this.radius,r:this.normalizedRadius,"stroke-width":this.strokeWidth,fill:"transparent",opacity:"0.1",ref:t=>this.ringBackground=t,class:"background-ring"}),t("circle",{cx:this.radius,cy:this.radius,r:this.normalizedRadius,"stroke-width":this.strokeWidth,"stroke-dasharray":`${this.circumference} ${this.circumference}`,fill:"transparent",ref:t=>this.ring=t,class:"ring"}),!this.disableDigits&&t("text",{x:"50%",y:"50%","dominant-baseline":"middle","text-anchor":"middle","font-size":this.intSize,ref:t=>this.percentText=t},t("tspan",{"font-size":this.intSize,ref:t=>this.intText=t,class:"intText"}),t("tspan",{class:"decimalPointText"},"."),t("tspan",{"font-size":this.decimalSize,dy:this.textOffset,ref:t=>this.decimalText=t,class:"decimalText"}),t("tspan",{"font-size":this.decimalSize,class:"percentText"},"%")))}static get is(){return"progress-ring"}static get encapsulation(){return"shadow"}static get properties(){return{decimalSize:{type:Number,attr:"decimal-size",watchCallbacks:["decimalSizeUpdated"]},disableDigits:{type:Boolean,attr:"disable-digits"},duration:{type:Number,attr:"duration",watchCallbacks:["durationtUpdated"]},easingType:{type:String,attr:"easing-type",watchCallbacks:["easingTypeUpdated"]},intSize:{type:Number,attr:"int-size",watchCallbacks:["intSizeUpdated"]},invertColors:{type:Boolean,attr:"invert-colors",watchCallbacks:["invertColorsUpdated"]},percent:{type:Number,attr:"percent",reflectToAttr:!0,mutable:!0,watchCallbacks:["percentUpdated"]},radius:{type:Number,attr:"radius",watchCallbacks:["radiusUpdated"]},strokeWidth:{type:Number,attr:"stroke-width",watchCallbacks:["strokeWidthUpdated"]}}}static get style(){return"circle{-webkit-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transform-origin:50% 50%;transform-origin:50% 50%}"}}export{a as ProgressRing};