import{h}from"../progressring.core.js";function backInOut(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}function backIn(t){var e=1.70158;return t*t*((e+1)*t-e)}function backOut(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}function bounceOut(t){var e=t*t;return t<4/11?7.5625*e:t<8/11?9.075*e-9.9*t+3.4:t<.9?4356/361*e-35442/1805*t+16061/1805:10.8*t*t-20.52*t+10.72}function bounceInOut(t){return t<.5?.5*(1-bounceOut(1-2*t)):.5*bounceOut(2*t-1)+.5}function bounceIn(t){return 1-bounceOut(1-t)}function circInOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function circIn(t){return 1-Math.sqrt(1-t*t)}function circOut(t){return Math.sqrt(1- --t*t)}function cubicInOut(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function cubicIn(t){return t*t*t}function cubicOut(t){var e=t-1;return e*e*e+1}function elasticInOut(t){return t<.5?.5*Math.sin(13*Math.PI/2*2*t)*Math.pow(2,10*(2*t-1)):.5*Math.sin(-13*Math.PI/2*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+1}function elasticIn(t){return Math.sin(13*t*Math.PI/2)*Math.pow(2,10*(t-1))}function elasticOut(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-10*t)+1}function expoInOut(t){return 0===t||1===t?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-20*t)+1}function expoIn(t){return 0===t?t:Math.pow(2,10*(t-1))}function expoOut(t){return 1===t?t:1-Math.pow(2,-10*t)}function linear(t){return t}function quadInOut(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)}function quadIn(t){return t*t}function quadOut(t){return-t*(t-2)}function quarticInOut(t){return t<.5?8*Math.pow(t,4):-8*Math.pow(t-1,4)+1}function quarticIn(t){return Math.pow(t,4)}function quarticOut(t){return Math.pow(t-1,3)*(1-t)+1}function qinticInOut(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}function qinticIn(t){return t*t*t*t*t}function qinticOut(t){return--t*t*t*t*t+1}function sineInOut(t){return-.5*(Math.cos(Math.PI*t)-1)}function sineIn(t){var e=Math.cos(t*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function sineOut(t){return Math.sin(t*Math.PI/2)}var eases=Object.freeze({backInOut:backInOut,backIn:backIn,backOut:backOut,bounceInOut:bounceInOut,bounceIn:bounceIn,bounceOut:bounceOut,circInOut:circInOut,circIn:circIn,circOut:circOut,cubicInOut:cubicInOut,cubicIn:cubicIn,cubicOut:cubicOut,elasticInOut:elasticInOut,elasticIn:elasticIn,elasticOut:elasticOut,expoInOut:expoInOut,expoIn:expoIn,expoOut:expoOut,linear:linear,quadInOut:quadInOut,quadIn:quadIn,quadOut:quadOut,quartInOut:quarticInOut,quartIn:quarticIn,quartOut:quarticOut,quintInOut:qinticInOut,quintIn:qinticIn,quintOut:qinticOut,sineInOut:sineInOut,sineIn:sineIn,sineOut:sineOut}),raf=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/60)},caf=window.cancelAnimationFrame||function(t){return clearTimeout(t)},defaultOptions={duration:4e3,easingType:"cubicInOut"};function easingAnimationFrames(t){var e=void 0===t?{}:t,n=e.easingType,r=e.duration,i=e.template,s=e.complete;if(i){var a=eases[void 0===n?defaultOptions.easingType:n],o=void 0===r?defaultOptions.duration:r,u=i,c=void 0===s?null:s,l=null,h=null,d=0,p=0,f=null,O=null,g=null,I=!1,m=!1,b=!1,y=!1,v=function(t){var e=t||(new Date).getTime();if(b?(h=e-d,b=!1):d=e-(h=h||e),d<o&&!m){l=raf(v),p=a(d/o);try{u({progress:p,stopFrames:f,resumeFrames:O,restartFrames:g})}catch(t){caf(l)}}else{if(y)return m=!1,y=!1,void raf(v);d>=o&&(u({progress:1,stopFrames:null,resumeFrames:null,restartFrames:g}),I=!0,l=null,c&&c())}};f=function(){m=!0},O=function(){m&&(m=!1,b=!0,l=raf(v))},g=function(t){var e=void 0===t?{}:t,n=e.restartEasingType,r=e.restartDuration,i=e.restartTemplate,s=e.restartComplete;i&&(a=eases[void 0===n?defaultOptions.easingType:n],o=void 0===r?defaultOptions.duration:r,u=i,c=void 0===s?null:s,h=null,d=0,p=0,I||m||(f(),y=!0),m&&(m=!1,l=raf(v)),I&&(I=!1,l=raf(v)))},l=raf(v)}}var ProgressRing=function(){function t(){var t=this;this.radius=80,this.strokeWidth=10,this.setShapeSettings=function(e){var n=e.radius,r=e.strokeWidth;t.normalizedRadius=(void 0===n?t.radius:n)-Math.floor((void 0===r?t.strokeWidth:r)/2),t.circumference=2*t.normalizedRadius*Math.PI},this.intSize=30,this.decimalSize=Math.floor(.7*this.intSize),this.disableDigits=!1,this.parsePercentText=function(t){return t<=0?["0","00"]:t.toFixed(1).split(".")},this.invertColors=!1,this.internalColors=["#ff4f40","#ffcd40","#30bf7a","#66a0ff"],this.internalColorsReversed=this.internalColors.slice().reverse(),this.setColorsSettings=function(e){var n=e.invertColors;t.colors=(void 0===n?t.invertColors:n)?t.internalColorsReversed:t.internalColors},this.setColors=function(e){var n;t.ring.style.stroke=n=e<=25?t.colors[0]:e<=50?t.colors[1]:e<=75?t.colors[2]:t.colors[3],t.ringBackground.style.stroke=n,t.percentText.style.fill=n},this.percent=0,this.duration=4e3,this.easingType="quartInOut",this.start=0,this.progress=0,this.isLoaded=!1,this.setProgress=function(e){var n=e.progress,r=e.stopFrames,i=e.restartFrames;if(t.isLoaded||!r){t.progress=n,t.restartFrames=i;var s=(t.internalPercent-t.start)*n+t.start;t.ring.style.strokeDashoffset=String(s>=100?0:t.circumference-s/100*t.circumference);var a=t.parsePercentText(s);t.intText.innerHTML=a[0],t.decimalText.innerHTML=a[1]}else r()}}return t.prototype.radiusUpdated=function(t){this.setShapeSettings({radius:t})},t.prototype.strokeWidthUpdated=function(t){this.setShapeSettings({strokeWidth:t})},t.prototype.invertColorsUpdated=function(t){this.setColorsSettings({invertColors:t})},t.prototype.percentUpdated=function(){this.percent<0?this.percent=0:this.restartProgress()},t.prototype.durationtUpdated=function(){this.restartProgress()},t.prototype.easingTypeUpdated=function(){this.restartProgress()},t.prototype.restartProgress=function(){if(this.restartFrames){var t=(this.internalPercent-this.start)*this.progress+this.start;this.internalPercent=this.percent,this.progress=0,this.start=t,this.restartFrames({restartDuration:this.duration,restartEasingType:this.easingType,restartTemplate:this.setProgress})}},t.prototype.componentWillLoad=function(){this.percent<0?this.percent=0:(this.isLoaded=!0,this.internalPercent=this.percent,this.setShapeSettings({radius:this.radius,strokeWidth:this.strokeWidth}),this.setColorsSettings({invertColors:this.invertColors}),easingAnimationFrames({duration:this.duration,easingType:this.easingType,template:this.setProgress}))},t.prototype.componentDidLoad=function(){this.setColors(this.percent)},t.prototype.componentDidUpdate=function(){this.setColors(this.percent)},t.prototype.componentDidUnload=function(){this.isLoaded=!1},t.prototype.render=function(){var t=this;return h("svg",{height:2*this.radius,width:2*this.radius},h("circle",{cx:this.radius,cy:this.radius,r:this.normalizedRadius,"stroke-width":this.strokeWidth,fill:"transparent",opacity:"0.1",ref:function(e){return t.ringBackground=e},class:"background-ring"}),h("circle",{cx:this.radius,cy:this.radius,r:this.normalizedRadius,"stroke-width":this.strokeWidth,"stroke-dasharray":this.circumference+" "+this.circumference,fill:"transparent",ref:function(e){return t.ring=e},class:"ring"}),h("text",{x:"50%",y:"50%","text-anchor":"middle",dy:"0.5ex","font-size":this.intSize,ref:function(e){return t.percentText=e},class:this.disableDigits?"hide":null},h("tspan",{"font-size":this.intSize,ref:function(e){return t.intText=e},class:"intText"}),h("tspan",{class:"decimalPointText"},"."),h("tspan",{"font-size":this.decimalSize,ref:function(e){return t.decimalText=e},class:"decimalText"}),h("tspan",{"font-size":this.decimalSize,class:"percentText"},"%")),"}")},Object.defineProperty(t,"is",{get:function(){return"progress-ring"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{colors:{state:!0},decimalSize:{type:Number,attr:"decimal-size"},disableDigits:{type:Boolean,attr:"disable-digits"},duration:{type:Number,attr:"duration",watchCallbacks:["durationtUpdated"]},easingType:{type:String,attr:"easing-type",watchCallbacks:["easingTypeUpdated"]},intSize:{type:Number,attr:"int-size"},invertColors:{type:Boolean,attr:"invert-colors",watchCallbacks:["invertColorsUpdated"]},percent:{type:Number,attr:"percent",reflectToAttr:!0,mutable:!0,watchCallbacks:["percentUpdated"]},radius:{type:Number,attr:"radius",watchCallbacks:["radiusUpdated"]},strokeWidth:{type:Number,attr:"stroke-width",watchCallbacks:["strokeWidthUpdated"]}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"circle{-webkit-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-transition:stroke .8s ease 0s;transition:stroke .8s ease 0s}text{-webkit-transition:fill .8s ease 0s;transition:fill .8s ease 0s}.hide{display:none}"},enumerable:!0,configurable:!0}),t}();export{ProgressRing};